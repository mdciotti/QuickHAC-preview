# Queries

The following snippets are examples of data that should be generated by the application and fed to the template engine. This data must be generated because the template engine contains no (or very very little) logic. For example, it cannot turn a UNIX timestamp into a formatted date (easily). Nor can it calculate course/category averages.

## Global

This is a collection of global items (usually describing some current value).

```json
{
	"version": "3.0",
	"cycle": 1,
	"studentName": "Gordon Freeman",
	"studentID": "101010"
}
```

## Actions

These show up as buttons in the action bar (header). Each page has its own actions, which should be provided as such:

```json
{
	"title": "Refresh",
	"icon": "icon-refresh"
}
```

## Banner

Information regarding a banner (advertisement). `active` (boolean) indicates whether it should be shown, `type` (either `"promotion"`, `"alert"`, or `"generic"`) indicates the purpose (and color) of the banner. `url` is optional, and will make the banner into a link if present. `text` should be html-escaped.

```json
{
	"active": true,
	"type": "promotion",
	"url": "https://www.facebook.com/",
	"text": "Let&apos;s keep in touch on Facebook!"
}
```

## Notifications

Notifications are displayed as cards, and clicking on them will take the user to that item.

```json
[
	{
		"date": "Oct 16",
		"title": "Gordon Freeman",
		"message": "New grade in Combinatorics & Graph Theory",
		"detail": "Scored 98 on &ldquo;Combinatorics Test&rdquo;",
		"route": "student/101010/course/1/cycle/1",
		"icon": "fa fa-arrow-circle-o-up",
		"unread": true
	},
	{
		"date": "Oct 8",
		"title": "Alyx Vance",
		"message": "New grade in Language Arts",
		"detail": "Scored 92 on &ldquo;Persuasive Essay&rdquo;",
		"route": "student/011235/course/1/cycle/1",
		"icon": "fa fa-arrow-circle-o-up",
		"unread": true
	},
	{
		"date": "Oct 2",
		"title": "Gordon Freeman",
		"message": "New grade in Combinatorics & Graph Theory",
		"detail": "Scored 100 on &ldquo;Combinatorics Review&rdquo;",
		"route": "student/101010/course/1/cycle/1",
		"icon": "fa fa-arrow-circle-o-up",
		"unread": false
	},
	{
		"date": "Sep 25",
		"title": "Gordon Freeman",
		"message": "New grade in Combinatorics & Graph Theory",
		"detail": "Scored 90 on &ldquo;Combinatorics and Probability Quiz&rdquo;",
		"route": "student/101010/course/1/cycle/1",
		"icon": "fa fa-arrow-circle-o-up",
		"unread": false
	}
]
```

## Views

The following is used to list the pages available to the user in the sidebar or pull-out drawer.

```json
[
	{
		"name": "Dashboard",
		"route": "dashboard",
		"icon": "icon-stats-bars"
	}
]
```

## Students

The following is the data used to create the student switcher menu.

```json
[
	{
		"id": "101010",
		"name": "Gordon Freeman",
		"color": "orange"
	},
	{
		"id": "313337",
		"name": "Eli Vance",
		"color": "silver"
	},
	{
		"id": "011235",
		"name": "Alyx Vance",
		"color": "amethyst"
	}
]
```

## Course Detail View

The following is a JSON object for rendering the details of a single cycle for one class. Note that the weight values should be given as numeric percentages.

```json
{
	"courseTitle": "Combinatorics & Graph Theory",
	"coursePeriod": 1,
	"teacherName": "Blaise Pascal",
	"teacherEmail": "bpascal@oxford.edu",
	"cycleAverage": 98,
	"courseGoal": 100,
	"cycleIndex": 1,
	"lastUpdated": "42 minutes ago",
	"categories": [
		{
			"title": "Homework",
			"weight": 10,
			"average": 100,
			"assignments": [
				{
					"title": "Factorials",
					"dateDue": "Sep 4",
					"dateAssigned": "Aug 28",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Permutations",
					"dateDue": "Sep 11",
					"dateAssigned": "Sep 4",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinations",
					"dateDue": "Sep 18",
					"dateAssigned": "Sep 11",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinatorics and Probability",
					"dateDue": "Sep 25",
					"dateAssigned": "Sep 18",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Review",
					"dateDue": "Oct 2",
					"dateAssigned": "Sep 25",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		},
		{
			"title": "Quizzes",
			"weight": 30,
			"average": 95,
			"assignments": [
				{
					"title": "Factorials",
					"dateDue": "Sep 4",
					"dateAssigned": "Sep 4",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Permutations",
					"dateDue": "Sep 11",
					"dateAssigned": "Sep 11",
					"ptsEarned": 100,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinations",
					"dateDue": "Sep 18",
					"dateAssigned": "Sep 18",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				},
				{
					"title": "Combinatorics and Probability",
					"dateDue": "Sep 25",
					"dateAssigned": "Sep 25",
					"ptsEarned": 90,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		},
		{
			"title": "Tests",
			"weight": 60,
			"average": 98,
			"assignments": [
				{
					"title": "Combinatorics Test",
					"dateDue": "Oct 9",
					"dateAssigned": "Oct 9",
					"ptsEarned": 98,
					"ptsPossible": 100,
					"weight": 1,
					"note": "",
					"extraCredit": false
				}
			]
		}
	]
}
```

## Courses

As listed in the sidebar. The averages are for the current cycle.

```json
[
	{
		"title": "Combinatorics & Graph Theory",
		"period": 1,
		"average": 98
	},
	{
		"title": "Statistics",
		"period": 2,
		"average": 95
	},
	{
		"title": "Software Development",
		"period": 3,
		"average": 96
	},
	{
		"title": "English",
		"period": 4,
		"average": 88
	},
	{
		"title": "Circuits",
		"period": 5,
		"average": 90
	},
	{
		"title": "Physics",
		"period": 6,
		"average": 93
	},
	{
		"title": "Orchestra",
		"period": 7,
		"average": 100
	}
]
```

## Export

The following is an example JSON export. Arrays have been shortened to one item for brevity.

```json
{
	"name": "Alan Turing",
	"studentID": "101010",
	"idHash": "s3mx92s2m0=",
	"preferences": {

	},
	"gpaBlacklist": [
		
	],
	"courses": [
		{
			"title": "Combinatorics & Graph Theory",
			"period": 1,
			"teacherName": "Blaise Pascal",
			"teaacherEmail": "bpascal@oxford.edu",
			"sixWeeksAverages": [98, 95, 94, 96, 93, 90],
			"examGrades": [99, 100],
			"semesterAverages": [96, 94],
			"goal": 95,
			"cycles": [
				{
					"index": 1,
					"average": 98,
					"categories": [
						{
							"title": "Homework",
							"weight": 10,
							"average": 100,
							"assignments": [
								{
									"title": "Factorials",
									"dateDue": "Oct 26",
									"dateAssigned": "Oct 24",
									"ptsEarned": 100,
									"ptsPossible": 100,
									"weight": 1,
									"note": "",
									"extraCredit": false
								}
							]
						}
					]
				}
			]
		}
	]
}
```

## Preferences

The following is the list of categories.

```json
[
	{
		"title": "General",
		"route": "preferences/general",
		"icon": "icon-gear-a",
		"selected": true
	},
	{
		"title": "Students",
		"route": "preferences/students",
		"icon": "icon-person-stalker"
	},
	{
		"title": "Security",
		"route": "preferences/security",
		"icon": "icon-locked"
	},
	{
		"title": "Import & Export",
		"route": "preferences/import-export",
		"icon": "icon-ios7-download"
	},
	{
		"title": "About",
		"route": "preferences/about",
		"icon": "icon-information-circled"
	}
]
```

The following is for a single view of the actual preference items for a particular category. I don't know yet how we will implement the interactive part of this, since the HTML elements will need to be bound to JavaScript functions on change. I'm hoping the web framework can handle this, which may mean the following could be irrelevant.

```json
{
	"sections": [
		{
			"title": "Refresh",
			"icon": "icon-refresh",
			"options": [
				{
					"title": "Refresh Interval",
					"caption": "Time in minutes in between automatic refresh.",
					"type": "number",
					"id": "refresh_interval",
					"value": 60
				}
			]
		},
		{
			"title": "Notifications",
			"icon": "icon-ios7-bell",
			"options": [
				{
					"title": "Consolidate Updates",
					"caption": "Notify once for all grade changes, instead of once for each individual change. This is required if password lock is enabled.",
					"type": "toggle",
					"id": "notif_consolidate",
					"value": false
				},
				{
					"title": "Auto-Hide Duration",
					"caption": "Duration in seconds to display the notification. Set to 0 to disable auto-hide (manual notification dismissal).",
					"type": "number",
					"id": "notif_duration",
					"value": 5
				}
			]
		},
		{
			"title": "Colorization",
			"route": "preferences/colorization",
			"icon": "icon-waterdrop"
		}
	]
}
```
